{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["export { getPhotos };\n\nimport axios from \"axios\";\n\nconst BASE_URL = \"https://pixabay.com/api/\";\nconst API_KEY = \"46495648-ca89e041c4cf307aa03db9722\";\nconst PER_PAGE = 15;\n\naxios.defaults.baseURL = BASE_URL;\naxios.defaults.params = {\n  key: API_KEY,\n  per_page: PER_PAGE,\n  image_type: \"photo\",\n  orientation: \"horizontal\",\n  safesearch: true,\n};\n\nasync function getPhotos(searchQuery, page = 1) {\n  const response = await axios.get(\"\", {\n    params: {\n      q: searchQuery,\n      page,\n    },\n  });\n\n  return {\n    hits: response.data.hits,\n    hasMore: page * PER_PAGE < response.data.totalHits,\n  };\n}\n","export {\n  showEmptyQueryError,\n  showEmptyError,\n  showUnknownError,\n  showLoader,\n  hideLoader,\n  clearGallery,\n  showGallery,\n  addItemsToGallery,\n  showLoadMoreButton,\n  hideLoadMoreButton,\n  showNoMoreImagesMessage,\n  scrollToImages,\n};\n\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nconst lightbox = new SimpleLightbox(\".gallery a\", {\n  captionsData: \"alt\",\n  captionDelay: 250,\n});\n\nfunction renderGalleryMarkup(images) {\n  return images\n    .map((image) => {\n      const {\n        webformatURL,\n        largeImageURL,\n        tags,\n        likes,\n        views,\n        comments,\n        downloads,\n      } = image;\n      return `\n            <li class=\"gallery-item\">\n                <a class=\"gallery-link\" href=\"${largeImageURL}\">\n                    <img class=\"gallery-image\" src=\"${webformatURL}\" data-source=\"${largeImageURL}\" alt=\"${tags}\" loading=\"lazy\" />\n                </a>\n                <div class=\"info\">\n                    <p class=\"info-item\">\n                        <b>Likes</b>\n                        ${likes}\n                    </p>\n                    <p class=\"info-item\">\n                        <b>Views</b>\n                        ${views}\n                    </p>\n                    <p class=\"info-item\">\n                        <b>Comments</b>\n                        ${comments}\n                    </p>\n                    <p class=\"info-item\">\n                        <b>Downloads</b>\n                        ${downloads}\n                    </p>\n                </div>\n            </li>\n            `;\n    })\n    .join(\"\");\n}\n\nfunction showEmptyQueryError() {\n  iziToast.error({\n    message: \"Please enter a search query!\",\n    position: \"topRight\",\n    timeout: 3000,\n  });\n}\n\nfunction showEmptyError() {\n  iziToast.error({\n    message:\n      \"Sorry, there are no images matching your search query. Please try again!\",\n    position: \"topRight\",\n    timeout: 3000,\n  });\n}\n\nfunction showUnknownError() {\n  iziToast.error({\n    message: \"Sorry, something went wrong. Please try again!\",\n    position: \"topRight\",\n    timeout: 3000,\n  });\n}\n\nfunction showLoader() {\n  document.querySelector(\".loader\").style.display = \"block\";\n}\n\nfunction hideLoader() {\n  document.querySelector(\".loader\").style.display = \"none\";\n}\n\nfunction clearGallery() {\n  document.querySelector(\".gallery\").innerHTML = \"\";\n}\n\nfunction showGallery(images) {\n  document.querySelector(\".gallery\").innerHTML = renderGalleryMarkup(images);\n  lightbox.refresh();\n}\n\nfunction addItemsToGallery(images) {\n  document\n    .querySelector(\".gallery\")\n    .insertAdjacentHTML(\"beforeend\", renderGalleryMarkup(images));\n  lightbox.refresh();\n  scrollToImages();\n}\n\nfunction showLoadMoreButton() {\n  document.querySelector(\".load-more\").style.display = \"block\";\n}\n\nfunction hideLoadMoreButton() {\n  document.querySelector(\".load-more\").style.display = \"none\";\n}\n\nfunction showNoMoreImagesMessage() {\n  iziToast.info({\n    message: \"We're sorry, but you've reached the end of search results.\",\n    position: \"topRight\",\n    timeout: 3000,\n  });\n}\n\nfunction scrollToImages() {\n  window.scrollBy({\n    top:\n      document.querySelector(\".gallery-item\").getBoundingClientRect().height *\n      2,\n    behavior: \"smooth\",\n  });\n}\n","import { getPhotos } from \"./js/pixabay-api\";\nimport * as render from \"./js/render-functions\";\n\nconst searchForm = document.querySelector(\".search-form\");\nlet searchQuery = \"\";\nlet _page = 1;\n\nsearchForm.addEventListener(\"submit\", async (event) => {\n  event.preventDefault();\n\n  _page = 1;\n  searchQuery = document.querySelector(\"#search-box\").value;\n\n  if (searchQuery.trim() === \"\") {\n    render.showEmptyQueryError();\n    return;\n  }\n\n  render.showLoader();\n\n  try {\n    const data = await getPhotos(searchQuery);\n    const images = data.hits;\n    render.clearGallery();\n\n    if (images.length === 0) {\n      render.showEmptyError();\n      return;\n    }\n    render.showGallery(images);\n\n    if (data.hasMore) {\n      render.showLoadMoreButton();\n    } else {\n      render.hideLoadMoreButton();\n      render.showNoMoreImagesMessage();\n    }\n  } catch (error) {\n    console.log(error);\n    render.showUnknownError();\n  } finally {\n    render.hideLoader();\n  }\n});\n\ndocument.querySelector(\".load-more\").addEventListener(\"click\", async () => {\n  _page += 1;\n\n  render.showLoader();\n  render.hideLoadMoreButton();\n\n  try {\n    const data = await getPhotos(searchQuery, _page);\n    render.addItemsToGallery(data.hits);\n\n    if (data.hasMore) {\n      render.showLoadMoreButton();\n    } else {\n      render.hideLoadMoreButton();\n      render.showNoMoreImagesMessage();\n    }\n  } catch (error) {\n    console.log(error);\n    render.showUnknownError();\n  } finally {\n    render.hideLoader();\n  }\n});\n"],"names":["BASE_URL","API_KEY","PER_PAGE","axios","getPhotos","searchQuery","page","response","lightbox","SimpleLightbox","renderGalleryMarkup","images","image","webformatURL","largeImageURL","tags","likes","views","comments","downloads","showEmptyQueryError","iziToast","showEmptyError","showUnknownError","showLoader","hideLoader","clearGallery","showGallery","addItemsToGallery","scrollToImages","showLoadMoreButton","hideLoadMoreButton","showNoMoreImagesMessage","searchForm","_page","event","render.showEmptyQueryError","render.showLoader","data","render.clearGallery","render.showEmptyError","render.showGallery","render.showLoadMoreButton","render.hideLoadMoreButton","render.showNoMoreImagesMessage","error","render.showUnknownError","render.hideLoader","render.addItemsToGallery"],"mappings":"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"}